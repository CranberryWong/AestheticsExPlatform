{% extends "tool_base.html" %}
{% block costomCSS %}
<style>
  .bd-placeholder-img {
    font-size: 1.125rem;
    text-anchor: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  @media (min-width: 768px) {
    .bd-placeholder-img-lg {
      font-size: 3.5rem;
    }
  }

  canvas {
    display: block;
    background: rgba(0, 0, 255, 0.2);
  }
</style>

{% end %}
{% block main %}
<div class="d-flex flex-column h-100 mt-4 mb-4" data-gr-c-s-loaded="true">
  <!-- Begin page content -->
  <main role="main" class="flex-shrink-0">
    <div class="container">
      <div class="row align-items-center justify-content-md-center">
        <div class="col-4">
          <div class="text-center">
            <a href="/visualization">
              <img class="mb-4" src="{{ static_url("images/IAF.png") }}" alt="" width="100%">
            </a>
          </div>
        </div>
        <div class="col-8">
          <form action="" methods="POST">
            <div class="form-row align-items-center">
              <div class="input-group mb-3">
                <input type="text" class="form-control" placeholder="Please input a URL"
                  aria-label="Recipient's username" aria-describedby="button-addon2">
                <div class="input-group-append">
                  <button class="btn btn-outline-secondary" type="submit" id="button-addon2">Submit</button>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="col-12">

          <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups" style="display: inline;">
            <div class="btn-group" role="group" aria-label="First group">
              <button type="button" class="btn btn-outline-success"><a
                  href="/visualization/sample?pagetitle=microsoft.com" style="color:inherit">1</a></button>
              <button type="button" class="btn btn-outline-success"><a href="/visualization/sample?pagetitle=infoq.com"
                  style="color:inherit">2</a></button>
              <button type="button" class="btn btn-outline-success"><a
                  href="/visualization/sample?pagetitle=olderadults.mobi" style="color:inherit">3</a></button>
              <button type="button" class="btn btn-outline-success"><a
                  href="/visualization/sample?pagetitle=pantone.com" style="color:inherit">4</a></button>
              <button type="button" class="btn btn-outline-success"><a href="/visualization/sample?pagetitle=math.com"
                  style="color:inherit">5</a></button>
              <button type="button" class="btn btn-outline-success"><a
                  href="/visualization/sample?pagetitle=yuchrszk.blogspot.com" style="color:inherit">6</a></button>
              <button type="button" class="btn btn-outline-success"><a
                  href="/visualization/sample?pagetitle=freebiesbug.com" style="color:inherit">7</a></button>
              <button type="button" class="btn btn-outline-success"><a href="/visualization/sample?pagetitle=pxtoem.com"
                  style="color:inherit">8</a></button>
              <button type="button" class="btn btn-outline-success"><a href="/visualization/sample?pagetitle=skima.jp"
                  style="color:inherit">9</a></button>
              <button type="button" class="btn btn-outline-success"><a
                  href="/visualization/sample?pagetitle=designmodo.com" style="color:inherit">10</a></button>
            </div>
            <!-- <p class="mr-4 mt-1" style="display: inline; margin-bottom:0;"><i>Test Cases: </i></p> -->
          </div>

        </div>

      </div>
    </div>
  </main>
</div>
<hr>

<div class="container">

  <div class="row">
    <div class="col-12">
      <h2 class="">{{ _("Summary") }}</h2>
      <hr>
      <h4 class="">{{ _("Optimization Suggestions") }}</h4>
      <div class="d-flex flex-column h-100" data-gr-c-s-loaded="true" style="position:relative;">
        <!-- Begin page content -->
        <main role="main" class="flex-shrink-0">
          <div id="buttonpanel">
      
            {% for i in location %}
            <div id="#first" style="position:absolute;z-index: 3;top: {{ i[1]-19 }}px; left: {{ i[0]-28 }}px;">
              <a class="btn btn-warning rounded-pill" data-toggle="collapse"
                href="#{{ 'collapseExample' + str(location.index(i)+1)}}" role="button" aria-expanded="false"
                aria-controls="{{ 'collapseExample' + str(location.index(i)+1)}}">
                #Sg
              </a>
              <div class="collapse" id="{{ 'collapseExample' + str(location.index(i)+1)}}">
                <div class="card card-body">
                  <ul>
                    {% if mark == 'd' %}
                    {% if i[2] <= 100 or i[2] >= 300 %}
                    <li>Decreasing the spacing</li>
                    {% end %}
                    {% if i[2] > 100 %}
                    <li>Decreasing the color variability</li>
                    <li>Decreasing the visual complexity</li>
                    {% end %}
                    {% end %}
                    {% if mark == 'i' %}
                    {% if i[2] <= 100 or i[2] >= 300 %}
                    <li>Increasing the spacing</li>
                    {% end %}
                    {% if i[2] > 100 %}
                    <li>Increasing the color variability</li>
                    <li>Decreasing the visual complexity</li>
                    {% end %}
                    {% end %}
                  </ul>
                </div>
              </div>
            </div>
            {% end %}
          </div>
          <div class="">
            {% if location != [] %}
          <canvas id="myCanvas" style="position:absolute;z-index: 1;width:928px;height:440px;"></canvas>
          {% end %}
            <img src="{{ static_url('sample/' + pagetitle + '.png') }}" id="webpage" style="width:928px;height:440px;border: #bbbbbb solid 1px;">
            <div style="padding:20px;width:100%;height:100px;background-color:#bbbbbb;">
              <form action="/visualization/sample?pagetitle={{pagetitle}}&appeal={{appeal}}" method="POST"
              class="form-inline float-left mr-2" style="display: inline;">
              <div class="form-group">
                <input type="hidden" id="pagetitle" value="{{ pagetitle }}" name="pagetitle"></div>
              <div class="form-group">
                <input type="hidden" id="pagetitle" value="{{ appeal }}" name="appeal"></div>
              <div class="form-group  mr-4"><input type="range" class="custom-range" min="0" max="8" step="8" value="8" id="customRange3" name="appeall">      </div>
              <button type="submit" class="btn btn-success">Design Suggestions</button>
              <!-- <p class="ml-2" style="margin-bottom:0;"><mark> Note: the yellow circle is the optimization range. </mark></p>     -->
            </form>
            </div>
          </div>
          <hr>
      <h4 class="">{{ _("Homogeneity Segmentation") }}</h4>
      
        </main>
      </div>
    </div>
  </div>
</div>

{% end %}
{% block customJS %}
<script type="text/javascript">
  // $(function () {
  //   //添加窗口尺寸改变响应监听
  //   $(window).resize(resizeCanvas);
  //   //页面加载后先设置一下canvas大小
  //   resizeCanvas();
  // });

  // //窗口尺寸改变响应（修改canvas大小）
  // function resizeCanvas() {
  //   $("#myCanvas").attr("width", $(window).get(0).innerWidth);
  //   $("#myCanvas").attr("height", $(window).get(0).innerHeight);
  // };

  function draw() {
    var canvas = document.getElementById('myCanvas');
    
    var webpage = document.getElementById("webpage");
    var imgHeight = webpage.clientHeight;
    var imgWidth = webpage.clientWidth;

    var wscale = imgWidth/1680;

    if (!canvas.getContext) return;
    var ctx = canvas.getContext("2d");

    ctx.fillStyle = "rgba(255, 193, 8, 0.5)"
    ctx.strokeStyle = "rgba(255, 193, 8, 255)"
    // ctx.strokeRect(300, 300, 100, 150);
    // ctx.fillRect(10, 10, 55, 50);

    {% for i in location %}
    ctx.beginPath();
    ctx.arc({{ i[0] * (980/1680) + 388 }}, {{ i[1] * (980/1680) + 375 }}, {{ i[2] * (980/1680) }}, 0, 2 * Math.PI);
    ctx.stroke();
    ctx.fill();
    {% end %}
  }
  draw();

</script>
{% end %}